<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>>Patrick Pelayo Final Project Favorite Other</title>
    <link href="Styles/layout.css" type="text/css" rel="stylesheet">
    <link href="Styles/standardPageStylesPatrickPelayo.css" type="text/css" rel="stylesheet">
    <link href="Styles/moreSpecificStyles/starWars.css" type="text/css" rel="stylesheet">
    <!-- Add a link to your own style sheet here  -->


    <!--
	Final Project by __________________________ (your name)
-->

</head>

<body>
    <div id="mainBox">

        <header>
            <a href="index.html">
            <img src="Images/header/clickableHeader.jpg" alt="PatrickP.tech">
            </a>
        </header>

        <nav>

            <div class="navBarLinks">
                <h3 class="navBarHeader">Navigation</h3>
                <ul>
                    <li>
                        <a href="index.html"> Home</a>
                    </li>
                    <li>
                        <a href="favlinks.html">Favorite Links</a>
                    </li>
                    <li>
                        <a href="resume.html">Resume</a>
                    </li>
                    <li>
                        I Love Star Wars
                    </li>
                    <li>
                        <a href="feedback.html">Feedback</a>
                    </li>
                </ul>

            </div>



        </nav>

        <div id="main">
            <h1 class="firstHeader">My thoughts on Star Wars!!!</h1>
            <p></p>

            <section id="preQ">

                <h2>Prequelj trilogy </h2>
                <article>

                    <p> The prequel trilogy composes the first three films(episodes) of the star wars saga. </p>
                    <h3> Episode 1 <br> The Phantom Menace </h3>
                    <p> </p>

                </article>


            </section>



            <div id="searchContainer01" <form>

                <fieldset id="searchFieldSet01">


                    <span>Search Star Wars</span> <br>


                    <input type="text" id="searchBox" name="searchBox">

                    <button id="submitForm" type="button">search</button>
                </fieldset>

                </form>
                <p id="tester"></p>  
                <ul id="searchResults"> </ul>
            </div>




            <script>
                //autoStart Functions
                (function() {

                    //create eventhandler to provide hints as input provided
                    document.getElementById("searchBox").addEventListener("keyup", function() {


                        //variables
                        var xhttp = new XMLHttpRequest();
                        var searchVal = document.getElementById("searchBox").value;
                        var query;
                        var searchObj = document.getElementById("searchResults");

                        //get length of current search obj children
                        var sLength = searchObj.children.length;

                        //delete old child nodes
                        if (sLength > 0) {
                            for (var i = 0; i < sLength; i++) {
                                searchObj.removeChild(searchObj.children[0]);
                            }
                        }




                        xhttp.onreadystatechange = function() {
                            if (this.readyState == 4 && this.status == 200) {
                                //get the result as a json object
                                var response = this.responseText;

                                //convert it
                                response = JSON.parse(response);





                                //set variable with # of children
                                var nChild = response.length;


                                //create and attach the nodes to the list
                                for (var i = 0; i < nChild; i++) {
                                    var cElem = document.createElement("li");                                    
                                    var aChild = document.createTextNode(response[i]);
                                    
                                    //fill out the search bar if a hint clicked
                                    cElem.addEventListener("click",function () {                                        
                                        document.getElementById("searchBox").value = this.innerHTML;
                                    });
                                    
                                    //some styling                                    
                                    cElem.style.listStyle = 'none';
                                    
                                    
                                    //append                                        
                                    cElem.appendChild(aChild);                                    
                                    searchObj.appendChild(cElem);
                                    
                                }



                            }
                        };

                        xhttp.open("GET", "PHP/searchDB.php?q=" + searchVal, true);
                        xhttp.send();
                    });


                    //create eventhandler for clicking search
                    document.getElementById("submitForm").addEventListener("click", function() {


                        //variables
                        var xhttp = new XMLHttpRequest();
                        var searchVal = document.getElementById("searchBox").value;
                        var query;



                        xhttp.onreadystatechange = function() {
                            if (this.readyState == 4 && this.status == 200) {
                                var response = this.responseText;
                                document.getElementById("tester").innerHTML = response;
                            }
                        };

                        xhttp.open("GET", "PHP/searchDBnoHint.php?q=" + searchVal, true);
                        xhttp.send();
                    });
                })();




                (function() {

                    //var
                    var event = document.getElementById("submitForm");

                    //event listener for click
                    event.addEventListener("click", function() {

                        var v = document.getElementById("choosenOption").value;
                        // document.getElementById("tester").innerHTML = v;

                    });



                })()

            </script>

        </div>



        <footer>
            This area is where your copyright info goes.
        </footer>

    </div>

</body>

</html>
